<!doctype html>
<html lang="en" ng-app="marketingJS">
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
 <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>7segments marketing</title>
  <meta name="description" content="">
  <meta name="author" content="">
  
  <meta name="viewport" content="width=device-width">
  <style type="text/css">
  body {
  padding-top: 60px;
  padding-bottom: 40px;
  }
  .sidebar-nav {
  padding: 9px 0;
  }
  .btn-group form {
    display: inline;
  }
  .ul-horizontal li {
    display: inline-block;
  }
  </style>


  <link rel="stylesheet" href="bootstrap/css/bootstrap.css"/>
  <link href="bootstrap/css/bootstrap-modal.css" rel="stylesheet"></link>

    <link rel="shortcut icon" href="favicon.png">
  
  
  <link rel="stylesheet" href="js/libs/jquery-ui/css/ui-lightness/jquery-ui-1.8.13.custom.css" type="text/css"/>
  <link rel="stylesheet" href="js/libs/jquery-ui-timepicker/jquery-ui-timepicker-addon.css" type="text/css"/>
  <link rel="stylesheet" href="js/libs/backbone-forms/backbone-forms.css" type="text/css"/>
  <script src="js/libs/modernizr-2.5.3-respond-1.1.0.min.js"></script>
  <link rel="stylesheet" href="css/marketing.css" type="text/css"/>
  <link rel="stylesheet" type="text/css" href="lib/angular-ui/build/angular-ui.css">
  <link href="http://ivaynberg.github.com/select2/select2-3.2/select2.css" rel="stylesheet"/>

<script src="js/libs/jquery-1.7.1.min.js"></script>

  <script type="text/javascript">
//    var onload = [], onload_pjax=[];
//    var $ = function() {
//      onload.push(arguments);
//      return {bind:$};
//    };
    window.request = {path:'/email/453/'};
  </script>
  
  
<style>
  #cke_message_template-template {
    border: 0px;
    box-shadow: none;
  }
    input[type='range'] {
        margin-right: 10px;
    }
</style>
</head>

<body data-spy="scroll">
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  
  <div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    </div>
  </div>
</div>
    <div class="container" id="__content_container__">
      <div ng-view></div>
</div>



<!--<script src="js/libs/bootstrap/bootstrap.min.js"></script>-->
<script src="bootstrap/js/bootstrap.js"></script>
<script src="bootstrap/js/bootstrap-modalmanager.js"></script>
<script src="bootstrap/js/bootstrap-modal.js"></script>

<script type="text/javascript" src="js/libs/pjax/jquery.pjax.js"></script>
<script type="text/javascript" src="js/libs/jquery-ui/js/jquery-ui-1.8.13.custom.min.js"></script>
<script src="js/libs/jquery-ui-timepicker/jquery-ui-timepicker-addon.js"></script>
<script src="js/libs/underscore/underscore.js"></script>
<script src="js/libs/backbone/backbone.js"></script>
<script src="js/libs/backbone-relational/backbone-relational.js"></script>
<script src="js/libs/backbone-forms/backbone-forms.js"></script>
<script src="js/libs/backbone-forms/templates/bootstrap.js"></script>
<script src="js/libs/backbone-forms/jquery-ui-editors.js"></script>
<script src="js/libs/jquery.ezmark.min.js"></script>

<!-- In production use:
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
-->
<script src="lib/angular/angular.js"></script>
<script src="js/app.js"></script>
<script src="js/services.js"></script>
<script src="js/controllers.js"></script>
<script src="js/filters.js"></script>
<script src="js/directives.js"></script>
<script src="lib/angular/angular-resource.js"></script>
<script src="lib/angular-ui/common/module.js" type="text/javascript"></script>
<script src="lib/angular-ui/modules/directives/select2/select2.js" type="text/javascript"></script>
<script src="http://ivaynberg.github.com/select2/select2-3.2/select2.js"></script>

<!-- cela libka alebo druha varianta - len niektore moduly -->
<script src="lib/angular-ui/build/angular-ui.js" type="text/javascript"></script>

<script src="js/script.js"></script>  

    <script type="text/javascript">
        $(function () {
            
            $("#plan-button").click(function () {
                $("#planned-execution-group").toggle()
            });            
        });
    </script>

    <script type="text/javascript">
        $(function () {
            $("#copy-button").click(function () {
                $("#copy-group").toggle();
            });
            $("#search").autocomplete({
                source:function (request, response) {
                    var data = {q:request.term, campaign_type:'email'};
                    $.get("/_campaign-search/", data, function (data) {
                        response($.map(data, function (item) {
                            return {value:item.id, label:item.name};
                        }));
                    });
                },
                select:function (event, ui) {
                    $("#copy-form").find(":input[name='source']").val(ui.item.value);
                    $("#copy-form").submit();
                    return false;
                }
            });
        });
    </script>

    <script type="text/javascript">
        $(function () {
            $("#fix_price, #unit_price, #units").on("change keyup click",function () {
                var totalPrice = 0;
                $("#fix_price, #unit_price, #units").each(function (i, item) {
                    var price = parseInt($(item).val());
                    if (price) {
                        totalPrice += price;
                    }
                });
                $("#price-total").html("Total: " + totalPrice)
            }).change();
        });
    </script>

  <script type="text/javascript">
    var PLACEHOLDER_ITEMS = [["FNAME - First name", "FNAME"], ["LNAME - Last name", "LNAME"], ["Email", "Email"], ["first_name", "first_name"], ["last_name", "last_name"], ["email", "email"], ["MC:SUBJECT - Message subject", "MC:SUBJECT"], ["LIST:COMPANY - Company name", "LIST:COMPANY"], ["COMPANY - Company name", "COMPANY"], ["CURRENT_YEAR - Current year", "CURRENT_YEAR"], ["TWITTER:PROFILEURL - URL for twitter profile", "TWITTER:PROFILEURL"], ["FACEBOOK:PROFILEURL - URL for facebook profile", "FACEBOOK:PROFILEURL"]];
  </script>
  <script type="text/javascript" src="js/libs/ckeditor-3.6.4/ckeditor.js"></script>
  <script type="text/javascript" src="js/libs/ckeditor-3.6.4/adapters/jquery.js"></script>
  <script type="text/javascript" src="js/libs/textextjs_src.js"></script>

    <script type="text/javascript">
        var editor = null;
        $(function() {
            $("#wysiwyg").on("change", function() {
                if ($(this).is(":checked")) {
                    editor = $("textarea#template").ckeditor({height: '600px', width:'850px'});
                } else {
                    if (editor) {
                        $('textarea#template').ckeditor(function(){
                            this.destroy();
                        });
                        editor = null;
                    }
                }
            }).change();
        });
    </script>
    <script type="text/javascript">
    $(function() {
        var customers_tag = {
            label: "8 customers",
            customers: true
        };
        var value = JSON.parse($("#customers").val());
        $("#customers").val("");
        $("#customers").after('<a href="#" id="add_filter">Add filter</a>');


        $('#customers').textext({
            plugins : 'tags prompt',
            prompt: "Insert email address and press enter to add it or click on any existing to change",
            ext: {
                itemManager: {
                    stringToItem: function(str) {
                        return {label:str};
                    },
                    itemToString: function(item) {
                        return item['label'];
                    },
                    compareItems: function(item1, item2)
                    {
                        if (item1==undefined || item2==undefined) {
                            return false;
                        }
                        if (item1.textTag) {
                            item1 = item1.textTag;
                        }
                        if (item2.textTag) {
                            item2 = item2.textTag;
                        }

                        return item1.label == item2.label;
                    }
                },
                tags: {
                    removeTag: function(tag) {
                        if(tag instanceof $)
                        {
                            element = tag;
                            tag = tag.data($.fn.textext.TextExtTags.prototype.CSS_TAG);
                        }
                        if (tag.textTag && tag.textTag.customers) {
                            $("#add_filter").show();
                        }

                        $.fn.textext.TextExtTags.prototype.removeTag.apply(this, arguments);
                    }
                }
            }
        }).on(
            'tagClick',
            function(e, tag, value, callback){
                if (value.customers) {
                    document.location = "\/email\/475\/customers1\/";
                    return false;
                } else {
                    var newValue = window.prompt('Change email', value.label);

                    if(newValue)
                        callback({label:newValue});
                }
            });

        $("#add_filter").on('click', function() {
            $('#customers').textext()[0].tags().addTags([ customers_tag ]);
            $(this).hide();
            return false;
        });

        $('#customers').textext()[0].tags().addTags(value)


        var show_add_filter = false;
        for (var item in value) {
            if (item.customers) {
                show_add_filter = true;
            }
        }
        $("add_filter").toggle(show_add_filter);
    });
    </script>



<!-- <script>
  var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script> -->

  
</body>
</html>
